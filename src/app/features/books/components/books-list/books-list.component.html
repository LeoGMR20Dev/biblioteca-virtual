<div class="row text-center mt-4 mb-2">
  <h1>Listado de libros</h1>
</div>

<div class="container my-3">
  <div class="row">
    <div class="col d-flex gap-1 justify-content-end">
      <button class="btn btn-primary" (click)="onAddBook()">
        Agregar Libro
      </button>
    </div>
  </div>
</div>

<div class="container">
  <div
    class="row g-3"
    *ngIf="((books$ | async)?.length ?? 0) > 0; else noBooks"
  >
    <div class="col-12 col-md-6 col-lg-4" *ngFor="let book of books$ | async">
      <div class="card h-100">
        <div class="card-body d-flex flex-column justify-content-between">
          <h2 class="card-title fs-5 fw-bold text-center">{{ book.title }}</h2>
          <img
            [src]="book.imageCover"
            alt="{{ book.title }}"
            class="img-fuild w-100 d-block mx-auto mb-2"
          />
          <div class="row">
            <div class="col-sm-6">
              <p>
                <span class="fw-semibold">ISBN:</span>&nbsp;{{
                  book.isbn | isbn
                }}
              </p>
              <p>
                <span class="fw-semibold">Categoría:</span>&nbsp;{{
                  book.category
                }}
              </p>
              <p>
                <span class="fw-semibold">Autor:</span>&nbsp;{{
                  book.authorFullname
                }}
              </p>
            </div>
            <div class="col-sm-6">
              <p>
                <span class="fw-semibold">Año de publicación:</span>&nbsp;{{
                  book.yearPublication
                }}
              </p>
              <p>
                <span class="fw-semibold">Precio ($):</span>&nbsp;{{
                  book.price
                }}
              </p>
              <p>
                <span class="fw-semibold">Existencias disponibles:</span
                >&nbsp;{{ book.physicalStock }}
              </p>
            </div>
          </div>
          <div class="d-flex gap-2 justify-content-end">
            <button
              class="btn btn-warning btn-sm"
              (click)="onEditBook(book.id)"
              [disabled]="isDeleting() === book.id"
            >
              Editar
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="onDeleteBook(book.id)"
              [disabled]="isDeleting() === book.id"
            >
              {{ isDeleting() === book.id ? "Eliminando..." : "Eliminar" }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noBooks>
    <div class="text-center my-4">
      <p>No hay libros registrados</p>
    </div>
  </ng-template>
</div>
